{% extends 'cuinclass/base.html' %}
{% block content %}
{% load static %}

            <h4>Students checked in for class:</h4>
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">ID</th>
                    <th scope="col">Name</th>
                    <th scope="col">Updated at</th>
                </tr>
                <tbody class="tbody">

                        {% for student in session.student_set.all %}
                        <tr>
                            {% if student.signed == True %}
                            <th scope="row" class="trow"></th>
                                <td>{{student.id}}</th>
                                <td>{{student.name}}</th>
                                <td>{{student.updated}}</th>
                            {% endif %}
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
        
            <div class="d-grid gap-2">
                <a class="btn btn-outline-success" href="mailto:email@example.com?subject=Attendance report for {{session}}&body=
                    Students who checked in for: {{session}}%0D%0A
                    {% for student in session.student_set.all %}
                        {% if student.signed == True %}
                        %0D%0A{{student.name}}, {{student.id}}, {{student.updated}}
                        {% endif %}
                    {% endfor %}
                    %0D%0A
                    %0D%0A
                    This report was generated by CUinClass application
                ">Send to Email</a>

                <form method="post">
                    {% csrf_token %}
                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-danger" type="submit", name="clear", value="clear">Clear List</button>
                    </div>
                </form>
            </div>

{% endblock content %}
